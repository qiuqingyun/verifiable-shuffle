# 密文

## 输入

将要输入的密文按照特定格式放在`cipher.txt`文件中，程序会读取该文件里的密文。若该文件不存在，则程序会自动生成一组随机的密文输入。

## 密文格式

>(u,v) (u,v) ... (u,v)  
(u,v) (u,v) ... (u,v)  
...  
(u,v) (u,v) ... (u,v)  

一共`m`行`n`列，这两个参数在config文件中设置。同一行的每一个`(u,v)`中间需要用一个空格来间隔。  

## 输出

经过shuffle和重加密后的密文输出在`reencrypted_ciper.txt`文件中。

# 密钥

ElGammal加密的私钥和公钥放在`ElGammal.txt`文件中，第一行为私钥，第二行为公钥，若该文件不存在则程序会自动随机生成一个。若不需要用到解密功能，则将私钥设置为`0`。

# 参数  

加密参数保存在`misc`文件夹的`160_1248`等文件中，以`160_1248`文件为例，一共有四行内容：  

>4671689792823066483796734555349668916508724827694449205134509033125800700463371515305117318816093713520501278362140917192467087109566277157414553539380792240613828884548814577523954955181952201011889120950316768092874124779659564069533609791560313483368321066525171661232175728355041674641691691262569532086033778291527589963488224217710365376231417585953017152924373408716183  

>1176433125950162593343758897227115919720791932929  

>798436198304838996167912264960158364919313763511203988701605559927057759832184124026316608753157604765569353047196122604328787222199477612425050217589393592713650267381115672767625961527059487696519673855481246326818314913653287389797379576862421826137572937474695564836784676377288262730784409346823391567828442935137298166485409065503401761566189005540989993403493969467168  

>411535934337565899693116797425618086119729029954  

其中前三行为ElGammal参数，第一行为模数，第二行为阶数，第三行为生成元。第四行是Pedersen的生成元。修改文件内容就可以修改参数。  

# 编译运行

在项目根目录下执行`make`指令，编译生成的可执行文件存放于项目根目录下的`bin`文件夹中。运行程序前需将`misc`文件夹中的文件拷贝至`bin`目录文件夹中。创建cipher.txt文件，保存将要输入程序的密文。在修改完参数后即可运行编译生成的可执行文件。

# 置换顺序

config文件中设置了输入密文的数量，即行数`m`、列数`n`，生成置换顺序向量`π`时，首先生成一个值为`( 1 ~ m×n )`的顺序向量，然后进行`m×n`次随机两个元素值互换，即生成一个值为`( 1 ~ m×n )`的乱序向量。这个乱序向量即为置换顺序，保存在`permu.txt`文件中，例如：  

>53 7 8 37 24 23 71 15 42 6 55 43 45 28 4 11 25 78 22 57 2 68 18 26 80 35 72 17 38 59 74 77 33 48 30 19 13 16 65 56 5 39 46 34 36 63 67 75 21 3 54 52 51 9 12 70 50 31 60 49 58 79 73 47 62 20 27 69 1 32 66 40 44 61 10 29 14 76 41 64  

意味着第53个（第10行，第2列）密文会被置换到第1个（第0行，第0列）位置；第7个（第1行，第1列）密文会被置换到第2个（第0行，第1列）位置等等。

# 重加密

随机生成`m×n`个随机数，用这些随机数生成`m×n`个明文为`1`的密文，再利用同态乘法将shuffle后的密文与密文`1`相乘，即生成了重加密后的密文，保存在`reencrypted_ciper.txt`文件中。

# 输出文件  

## round 1  

Prover对置换顺序`a：π_1, ... , π_N`的承诺，每一行进行一次承诺。

## round 2  
